---
import { getLocaleFromUrl, getTranslations } from '../i18n';

const locale = getLocaleFromUrl(Astro.url);
const t = getTranslations(locale);
---

<section class="py-24 bg-[#0d0d12] relative">
  <div class="container mx-auto px-4 max-w-7xl">
    <div class="mb-16 text-center">
      <h2 class="text-4xl md:text-5xl font-black text-white mb-6">
        {t.engines.title}<br />
        <span class="text-primary">{t.engines.titleHighlight}</span>
      </h2>
      <p class="text-slate-400 max-w-2xl mx-auto text-lg">{t.engines.subtitle}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-4 lg:grid-cols-4 gap-6 auto-rows-[minmax(180px,auto)]">
      <!-- SQL Engine - large card -->
      <div class="md:col-span-2 md:row-span-2 bento-card rounded-3xl border border-blue-500/30 p-8 relative overflow-hidden group">
        <div class="absolute top-0 right-0 w-32 h-32 bg-blue-600/20 blur-[60px] rounded-full pointer-events-none"></div>
        <div class="flex justify-between items-start mb-6">
          <div class="p-3 bg-blue-500/10 rounded-xl border border-blue-500/20">
            <span class="material-symbols-outlined text-blue-400 text-3xl">database</span>
          </div>
          <span class="px-2 py-1 rounded bg-blue-900/30 text-blue-300 text-xs font-mono border border-blue-500/30">{t.engines.sql.badge}</span>
        </div>
        <h3 class="text-2xl font-bold text-white mb-2">{t.engines.sql.name}</h3>
        <p class="text-slate-400 mb-6 text-sm">{t.engines.sql.desc}</p>
        <div class="bg-[#0f0e16] rounded-lg border border-white/10 p-4 font-mono text-xs text-slate-300 mb-6 overflow-hidden relative">
          <div class="flex gap-1.5 mb-3">
            <div class="w-2.5 h-2.5 rounded-full bg-red-500/50"></div>
            <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/50"></div>
            <div class="w-2.5 h-2.5 rounded-full bg-green-500/50"></div>
          </div>
          <p><span class="text-purple-400">SELECT</span> * <span class="text-purple-400">FROM</span> users</p>
          <p><span class="text-purple-400">WHERE</span> vector_similarity(embedding, ?) &gt; 0.9</p>
          <p><span class="text-purple-400">AND</span> last_active &gt; <span class="text-green-400">NOW()</span> - INTERVAL '5m';</p>
        </div>
        <div class="mt-auto">
          <div class="flex justify-between text-xs text-slate-500 mb-2 font-mono">
            <span>{t.engines.sql.throughputLabel}</span>
            <span class="text-green-400">165K rows/s</span>
          </div>
          <svg class="w-full h-12 sparkline" fill="none" stroke="currentColor" viewBox="0 0 300 50">
            <path d="M0,45 L10,40 L20,42 L30,30 L40,35 L50,20 L60,25 L70,10 L80,15 L90,5 L100,12 L110,8 L120,20 L130,15 L140,25 L150,18 L160,28 L170,20 L180,30 L190,25 L200,35 L210,20 L220,10 L230,15 L240,5 L250,12 L260,8 L270,18 L280,15 L290,25 L300,20" stroke="url(#gradient-sql)" stroke-width="2" />
            <defs>
              <linearGradient id="gradient-sql" x1="0%" x2="100%" y1="0%" y2="0%">
                <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.2" />
                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
              </linearGradient>
            </defs>
          </svg>
        </div>
      </div>

      <!-- Vector Search -->
      <div class="md:col-span-2 md:row-span-1 bento-card rounded-3xl border border-purple-500/30 p-6 relative overflow-hidden flex items-center justify-between group" style="backdrop-filter: none;">
        <div class="z-10 max-w-[60%]">
          <div class="flex items-center gap-3 mb-3">
            <span class="material-symbols-outlined text-purple-400">hub</span>
            <h3 class="text-xl font-bold text-white">{t.engines.vector.name}</h3>
          </div>
          <p class="text-slate-400 text-sm mb-4">{t.engines.vector.desc}</p>
          <div class="flex gap-2">
            <span class="px-2 py-0.5 rounded bg-purple-900/30 border border-purple-500/30 text-[10px] text-purple-300 font-mono">HNSW</span>
            <span class="px-2 py-0.5 rounded bg-purple-900/30 border border-purple-500/30 text-[10px] text-purple-300 font-mono">SQ8</span>
          </div>
        </div>
        <div class="cube-container mr-6">
          <div class="cube">
            <div class="face front">V</div>
            <div class="face back">E</div>
            <div class="face right">C</div>
            <div class="face left">T</div>
            <div class="face top">O</div>
            <div class="face bottom">R</div>
          </div>
        </div>
        <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-purple-600/20 blur-[50px] rounded-full pointer-events-none"></div>
      </div>

      <!-- KV Store -->
      <div class="md:col-span-1 md:row-span-1 bento-card rounded-3xl border border-teal-500/30 p-6 flex flex-col justify-between group hover:bg-surface-lighter/50">
        <div class="flex justify-between items-start">
          <span class="material-symbols-outlined text-teal-400 text-2xl">bolt</span>
          <span class="text-xs text-teal-500 font-mono animate-pulse">ACTIVE</span>
        </div>
        <div>
          <h3 class="text-lg font-bold text-white mb-1">{t.engines.kv.name}</h3>
          <div class="mt-3 font-mono text-2xl text-white tracking-tighter">
            625<span class="text-teal-500 text-base">K ops/s</span>
          </div>
          <p class="text-slate-500 text-xs mt-1">{t.engines.kv.latencyLabel}</p>
        </div>
      </div>

      <!-- TimeSeries -->
      <div class="md:col-span-1 md:row-span-1 bento-card rounded-3xl border border-pink-500/30 p-6 flex flex-col justify-between group hover:bg-surface-lighter/50">
        <div class="flex justify-between items-start">
          <span class="material-symbols-outlined text-pink-400 text-2xl">timeline</span>
          <span class="text-xs text-pink-500 font-mono">{t.engines.ts.badge}</span>
        </div>
        <div>
          <h3 class="text-lg font-bold text-white mb-1">{t.engines.ts.name}</h3>
          <div class="mt-3 font-mono text-2xl text-white tracking-tighter flex items-baseline gap-1">
            353<span class="text-pink-500 text-base">K pts/s</span>
          </div>
          <p class="text-slate-500 text-xs mt-1">{t.engines.ts.ptsLabel}</p>
        </div>
      </div>

      <!-- Geospatial -->
      <div class="md:col-span-2 md:row-span-1 bento-card rounded-3xl border border-indigo-500/30 p-0 relative overflow-hidden group">
        <div class="absolute inset-0 bg-[#080810]">
          <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(#4f46e5 1px, transparent 1px); background-size: 20px 20px;"></div>
          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-indigo-500 rounded-full shadow-[0_0_15px_rgba(99,102,241,1)] z-10"></div>
          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rounded-full border border-indigo-500/50 animate-radar box-border"></div>
        </div>
        <div class="relative z-10 p-6 h-full flex flex-col justify-center pointer-events-none">
          <div class="flex items-center gap-3 mb-1">
            <span class="material-symbols-outlined text-indigo-400">travel_explore</span>
            <h3 class="text-xl font-bold text-white">{t.engines.geo.name}</h3>
          </div>
          <p class="text-slate-300 text-sm max-w-[60%]">{t.engines.geo.desc}</p>
        </div>
      </div>

      <!-- AI Memory Engine - large card -->
      <div class="md:col-span-2 md:row-span-2 bento-card rounded-3xl border border-accent/40 bg-gradient-to-br from-surface-dark to-accent/5 p-8 relative overflow-hidden flex flex-col justify-between group">
        <div class="absolute top-0 right-0 w-full h-full bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMSIgY3k9IjEiIHI9IjEiIGZpbGw9InJnYmEoMCwgMjQwLCAyNTUsIDAuMSkiLz48L3N2Zz4=')] opacity-20"></div>
        <div class="absolute top-8 right-8 w-24 h-24 flex items-center justify-center">
          <div class="absolute inset-0 bg-accent/20 blur-[40px] rounded-full animate-pulse-slow"></div>
          <span class="material-symbols-outlined text-accent text-[64px] relative z-10 animate-float drop-shadow-[0_0_15px_rgba(0,240,255,0.5)]">psychology</span>
        </div>
        <div class="relative z-10 mt-4">
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-accent/10 border border-accent/20 text-accent text-xs font-bold uppercase tracking-wider mb-4">
            <span class="material-symbols-outlined text-[14px]">smart_toy</span>
            {t.engines.ai.badge}
          </div>
          <h3 class="text-3xl font-bold text-white mb-2">{t.engines.ai.name}</h3>
          <p class="text-slate-400 mb-6 text-sm max-w-[70%]">{t.engines.ai.desc}</p>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-auto">
          <div class="p-4 rounded-xl bg-black/40 border border-white/5 backdrop-blur-sm">
            <span class="text-slate-400 text-xs uppercase tracking-wider block mb-1">Abstractions</span>
            <span class="text-white font-mono text-lg">6 <span class="text-accent text-xs">Primitives</span></span>
          </div>
          <div class="p-4 rounded-xl bg-black/40 border border-white/5 backdrop-blur-sm">
            <span class="text-slate-400 text-xs uppercase tracking-wider block mb-1">Vector KNN</span>
            <span class="text-white font-mono text-lg">0.2 <span class="text-accent text-xs">ms P95</span></span>
          </div>
        </div>
      </div>

      <!-- Message Queue -->
      <div class="md:col-span-1 md:row-span-1 bento-card rounded-3xl border border-orange-500/30 p-5 flex items-center gap-4 group hover:border-orange-500/60">
        <div class="w-12 h-12 rounded-full bg-orange-500/10 flex items-center justify-center shrink-0">
          <span class="material-symbols-outlined text-orange-400">queue</span>
        </div>
        <div>
          <h3 class="text-sm font-bold text-white">{t.engines.mq.name}</h3>
          <p class="text-orange-400/80 text-xs font-mono mt-1">1.6M msg/s</p>
        </div>
      </div>

      <!-- Graph Engine -->
      <div class="md:col-span-1 md:row-span-1 bento-card rounded-3xl border border-green-500/30 p-5 flex items-center gap-4 group hover:border-green-500/60">
        <div class="w-12 h-12 rounded-full bg-green-500/10 flex items-center justify-center shrink-0">
          <span class="material-symbols-outlined text-green-400">share</span>
        </div>
        <div>
          <h3 class="text-sm font-bold text-white">{t.engines.graph.name}</h3>
          <p class="text-green-400/80 text-xs font-mono mt-1">935K reads/s</p>
        </div>
      </div>

      <!-- Full-Text Search -->
      <div class="md:col-span-4 md:row-span-1 bento-card rounded-3xl border border-amber-500/30 p-6 relative overflow-hidden flex items-center justify-between group hover:border-amber-500/60">
        <div class="z-10 flex items-center gap-4">
          <div class="w-12 h-12 rounded-full bg-amber-500/10 flex items-center justify-center shrink-0">
            <span class="material-symbols-outlined text-amber-400">search</span>
          </div>
          <div>
            <h3 class="text-lg font-bold text-white">{t.engines.fts.name}</h3>
            <p class="text-slate-400 text-sm mt-1">{t.engines.fts.desc}</p>
          </div>
        </div>
        <div class="flex gap-2 shrink-0">
          <span class="px-2 py-0.5 rounded bg-amber-900/30 border border-amber-500/30 text-[10px] text-amber-300 font-mono">BM25</span>
          <span class="px-2 py-0.5 rounded bg-amber-900/30 border border-amber-500/30 text-[10px] text-amber-300 font-mono">ES_COMPAT</span>
        </div>
        <div class="absolute -bottom-8 -right-8 w-32 h-32 bg-amber-600/10 blur-[40px] rounded-full pointer-events-none"></div>
      </div>
    </div>
  </div>
</section>
